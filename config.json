{
	"layouts": [
		{
			"id": "main",
			"direction": "Vertical",
			"constraints": ["l.3", "p.70", "p.30"]
		},
		{
			"id": "widgets",
			"direction": "Horizontal",
			"constraints": ["50", "50"],
			"parent": "main.1"
		},
		{
			"id": "quests",
			"direction": "Vertical",
			"constraints": ["50", "50"],
			"parent": "widgets.1"
		},
		{
			"id": "create_task",
			"direction": "Horizontal",
			"constraints": ["50", "50"],
			"constraint_fit": {"Centered": {"percent_y": 30, "percent_x": 50}}
		}
	],
	"states": ["CategoriesFocus", "CategoriesActive", "CategoriesCreate", "TasksFocus", "TasksActive", "TaskCreateName", "TaskCreateExp", "MilestonesFocus", "MilestonesActive", "MilestoneCreateName", "MilestoneCreateExp", "TimersFocus", "TimersActive", "HelpPreview"],
	"keybinds": {
		"CategoriesFocus": {
			"Enter": {"command": "State(CategoriesActive)", "info": "enter categories"},
			"Right": {"command": "State(TasksFocus)", "info": "move focus to tasks"},
			"Left": {"command": "State(TasksFocus)", "info": "move focus to tasks"},
			"Up": {"command": "State(TimersFocus)", "info": "move focus to timers"},
			"Down": {"command": "State(TimersFocus)", "info": "move focus to timers"},
			"C(q)": {"command": "save;quit", "info": "quit application"},
			"C(h)": {"command": "Set(last_state, CategoriesFocus);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"CategoriesActive": {
			"Esc": {"command": "State(CategoriesFocus)", "info": "return to categories focus"},
			"Enter": {"command": "Result(category preview not yet supported)", "info": "attempt category preview"},
			"Down": {"command": "Change(category_id, 1)", "info": "move selection down"},
			"Up": {"command": "Change(category_id, -1)", "info": "move selection up"},
			"C(q)": {"command": "State(CategoriesFocus)", "info": "exit active state"},
			"C(n)": {"command": "OpenBuffer(category_name, text);Toggle(category_create);State(CategoriesCreate)", "info": "create new category"},
			"C(h)": {"command": "Set(last_state, CategoriesActive);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"C(t)": {"command": "Timer", "info": "Toggle timer"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"CategoriesCreate": {
			"Esc": {"command": "CloseBuffer;State(CategoriesActive);Toggle(category_create)", "info": "cancel category creation"},
			"Enter": {"command": "AddCategory($category_name);CloseBuffer;State(CategoriesActive);Toggle(category_create)", "info": "attempt to create category"},
			"C(q)": {"command": "CloseBuffer;State(CategoriesActive);Toggle(category_create)", "info": "exit to categories"},
			"C(h)": {"command": "Set(last_state, CategoriesCreate);State(HelpPreview);Toggle(help)", "info": "open help view"}
		},
		"TasksFocus": {
			"Enter": {"command": "State(TasksActive)", "info": "enter tasks view"},
			"Right": {"command": "State(CategoriesFocus)", "info": "move focus to categories"},
			"Left": {"command": "State(CategoriesFocus)", "info": "move focus to categories"},
			"Down": {"command": "State(MilestonesFocus)", "info": "move focus to milestones"},
			"Up": {"command": "State(TimersFocus)", "info": "move focus to timers"},
			"C(q)": {"command": "save;quit", "info": "quit application"},
			"C(h)": {"command": "Set(last_state, TasksFocus);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"TasksActive": {
			"Esc": {"command": "State(TasksFocus)", "info": "return to tasks focus"},
			"Enter": {"command": "Result(adding tasks not yet supported)", "info": "attempt to add task"},
			"Down": {"command": "Change(task_id, 1)", "info": "move selection down"},
			"Up": {"command": "Change(task_id, -1)", "info": "move selection up"},
			"C(q)": {"command": "State(TasksFocus)", "info": "exit active state"},
			"C(n)": {"command": "Toggle(task_create);State(TaskCreateName);OpenBuffer(task_name, text)", "info": "create new task"},
			"C(h)": {"command": "Set(last_state, TasksActive);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"C(f)": {"command": "CompleteTask", "info": "complete task"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"TaskCreateName": {
			"Right": {"command": "SaveBuffer;State(TaskCreateExp);OpenBuffer(task_exp, number)", "info": "edit exp"},
			"Left": {"command": "SaveBuffer;State(TaskCreateExp);OpenBuffer(task_exp, number)", "info": "edit exp"},
			"Enter": {"command": "AddTask($task_name, $task_exp);Remove(task_name);Remove(task_exp);CloseBuffer;Toggle(task_create);State(TasksActive)", "info": "save task"},
			"Esc": {"command": "Remove(task_name);Remove(task_exp);CloseBuffer;Toggle(task_create);State(TasksActive)", "info": "quit task creation"}
		},
		"TaskCreateExp": {
			"Right": {"command": "SaveBuffer;State(TaskCreateName);OpenBuffer(task_name, text)", "info": "edit name"},
			"Left": {"command": "SaveBuffer;State(TaskCreateName);OpenBuffer(task_name, text)", "info": "edit name"},
			"Enter": {"command": "AddTask($task_name, $task_exp);Remove(task_name);Remove(task_exp);CloseBuffer;Toggle(task_create);State(TasksActive)", "info": "save task"},
			"Esc": {"command": "Remove(task_name);Remove(task_exp);CloseBuffer;Toggle(task_create);State(TasksActive)", "info": "quit task creation"}
		},
		"MilestonesFocus": {
			"Enter": {"command": "State(MilestonesActive)", "info": "enter milestones view"},
			"Right": {"command": "State(CategoriesFocus)", "info": "move focus to categories"},
			"Left": {"command": "State(CategoriesFocus)", "info": "move focus to categories"},
			"Down": {"command": "State(TimersFocus)", "info": "move focus to timers"},
			"Up": {"command": "State(TasksFocus)", "info": "move focus to tasks"},
			"C(q)": {"command": "save;quit", "info": "quit application"},
			"C(h)": {"command": "Set(last_state, MilestonesFocus);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"MilestonesActive": {
			"Esc": {"command": "State(MilestonesFocus)", "info": "return to milestones focus"},
			"Enter": {"command": "Result(adding milestones not yet supported)", "info": "attempt to add milestone"},
			"Down": {"command": "Change(milestone_id, 1)", "info": "move selection down"},
			"Up": {"command": "Change(milestone_id, -1)", "info": "move selection up"},
			"C(q)": {"command": "State(MilestonesFocus)", "info": "exit active state"},
			"C(n)": {"command": "Toggle(milestone_create);State(MilestoneCreateName);OpenBuffer(milestone_name, text)", "info": "create new milestone"},
			"C(h)": {"command": "Set(last_state, MilestonesActive);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"C(f)": {"command": "CompleteMilestone", "info": "complete milestone"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"MilestoneCreateName": {
			"Right": {"command": "SaveBuffer;State(MilestoneCreateExp);OpenBuffer(milestone_exp, number)", "info": "edit exp"},
			"Left": {"command": "SaveBuffer;State(MilestoneCreateExp);OpenBuffer(milestone_exp, number)", "info": "edit exp"},
			"Enter": {"command": "AddMilestone($milestone_name, $milestone_exp);Remove(milestone_name);Remove(milestone_exp);CloseBuffer;Toggle(milestone_create);State(MilestonesActive)", "info": "save milestone"},
			"Esc": {"command": "Remove(milestone_name);Remove(milestone_exp);CloseBuffer;Toggle(milestone_create);State(MilestonesActive)", "info": "quit milestone creation"}
		},
		"MilestoneCreateExp": {
			"Right": {"command": "SaveBuffer;State(MilestoneCreateName);OpenBuffer(milestone_name, text)", "info": "edit name"},
			"Left": {"command": "SaveBuffer;State(MilestoneCreateName);OpenBuffer(milestone_name, text)", "info": "edit name"},
			"Enter": {"command": "AddMilestone($milestone_name, $milestone_exp);Remove(milestone_name);Remove(milestone_exp);CloseBuffer;Toggle(milestone_create);State(MilestonesActive)", "info": "save milestone"},
			"Esc": {"command": "Remove(milestone_name);Remove(milestone_exp);CloseBuffer;Toggle(milestone_create);State(MilestonesActive)", "info": "quit milestone creation"}		},
		"TimersFocus": {
			"Up": {"command": "State(CategoriesFocus)", "info": "move focus to categories"},
			"Down": {"command": "State(CategoriesFocus)", "info": "move focus to categories"},
			"Enter": {"command": "State(TimersActive)", "info": "enter timers view"},
			"C(q)": {"command": "save;quit", "info": "quit application"},
			"C(h)": {"command": "Set(last_state, TimersFocus);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"TimersActive": {
			"C(q)": {"command": "State(TimersFocus)", "info": "exit active state"},
			"C(h)": {"command": "Set(last_state, TimersActive);State(HelpPreview);Toggle(help)", "info": "open help view"},
			"Enter": {"command": "Result(Timer preview not supported yet)", "info": "timer preview"},
			"C(s)": {"command": "Save;Result(data saved)", "info": "save data"}
		},
		"HelpPreview": {
			"Esc": {"command": "State($last_state);Toggle(help)", "info": "close help and return"},
			"C(q)": {"command": "State($last_state);Toggle(help)", "info": "close help and return"}
		}
	},
	"styles": {
		"active": {
			"fg": "#DCA55A",
			"bg": "#000000"
		},
		"focus": {
			"fg": "#C89146",
			"bg": "#0A0A0A"
		},
		"passive": {
			"fg": "gray",
			"bg": "#191919"
		}
	},
	"widgets": [
		{
			"widget_type": "Categories",
			"layout": "widgets",
			"constraint": 0,
			"styles": {
				"CategoriesActive": "active",
				"CategoriesCreate": "active",
				"CategoriesFocus": "focus",
				"_": "passive"
			}
		},
		{
			"widget_type": "Tasks",
			"layout": "quests",
			"constraint": 0,
			"styles": {
				"TasksActive": "active",
				"TasksFocus": "focus",
				"_": "passive"
			}
		},
		{
			"widget_type": "Milestones",
			"layout": "quests",
			"constraint": 1,
			"styles": {
				"MilestonesActive": "active",
				"MilestonesFocus": "focus",
				"_": "passive"
			}
		},
		{
			"widget_type": "Timers",
			"layout": "main",
			"constraint": 2,
			"styles": {
				"TimersActive": "active",
				"TimersFocus": "focus",
				"_": "passive"
			}
		},
		{
			"widget_type": {"Input": {"buffer_name": "category_name"}},
			"id": "category_create",
			"layout": "frame",
			"constraint": 0,
			"styles": {
				"CategoriesCreate": "active",
				"_": "passive"
			},
			"constraint_fit": {"Centered": {"percent_x": 30, "percent_y": 20}},
			"visible": false
		},
		{
			"widget_type": {"Input": {"buffer_name": "task_name"}},
			"id": "task_create",
			"layout": "create_task",
			"constraint": 0,
			"styles": {
				"TaskCreateName": "active",
				"TaskCreateExp": "focus",
				"_": "passive"
			},
			"visible": false
		},
		{
			"widget_type": {"Input": {"buffer_name": "task_exp"}},
			"id": "task_create",
			"layout": "create_task",
			"constraint": 1,
			"styles": {
				"TaskCreateExp": "active",
				"TaskCreateName": "focus",
				"_": "passive"
			},
			"visible": false
		},
		{
			"widget_type": {"Input": {"buffer_name": "milestone_name"}},
			"id": "milestone_create",
			"layout": "create_task",
			"constraint": 0,
			"styles": {
				"MilestoneCreateName": "active",
				"MilestoneCreateExp": "focus",
				"_": "passive"
			},
			"visible": false
		},
		{
			"widget_type": {"Input": {"buffer_name": "milestone_exp"}},
			"id": "milestone_create",
			"layout": "create_task",
			"constraint": 1,
			"styles": {
				"MilestoneCreateExp": "active",
				"MilestoneCreateName": "focus",
				"_": "passive"
			},
			"visible": false
		},
		{
			"widget_type": "Help",
			"id": "help",
			"layout": "frame",
			"constraint": 0,
			"styles": {
				"HelpPreview": "active",
				"_": "passive"
			},
			"constraint_fit": {"Centered": {"percent_x": 60, "percent_y": 40}},
			"visible": false
		}
	],
	"values": {
		"category_id": "0",
		"task_id": "0",
		"milestone_id": "0",
		"timer_id": "0",
		"last_state": "_"
	}
}
